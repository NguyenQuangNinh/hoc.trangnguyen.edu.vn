$(function(){!function(t,n,e,i,a,o,r,c){e=util.parseInt(e),i=util.parseInt(i);var l,s=function(t){var n=Math.floor(t/60),e=t-60*n;return n<10&&(n="0"+n),e<10&&(e="0"+e),n+":"+e},u=function(t,n,i){if(3==t){for(var a=0,o=0,r="",c=1;c<=3;c++)n[c]&&(a+=util.parseInt(n[c].score),o+=util.parseInt(n[c].time),r+="Bài: "+c+"- Điểm: "+n[c].score+" - Thời gian: "+s(n[c].time)+"<br/>");r="Tỗng điểm: "+a+"<br/>"+r,r="Tổng thời gian: "+s(o)+"<br/>"+r;var l={};a>150?(l.next={label:"Thi tiếp",className:"btn-warning",callback:function(){window.location.href="../vong-"+(util.parseInt(e)+1)+"/bai-1.html"}},r+="(Bạn được thi vòng tiếp theo)"):(l.rePlay={label:"Thi lại",className:"btn-warning",callback:function(){window.location.href="bai-1.html"}},r+="(Bạn chưa qua vòng này)"),l.exit={label:"Thoát",className:"btn-warning",callback:function(){window.location.href="../.."}},util.DelLocalStore(i),bootbox.dialog({title:"Kết quả vòng thi",message:r,buttons:l})}},g=function(t,n){var a=c.SHA256("{{{type_id}}}-"+e+"-{{{user_id}}}").toString(),o=util.ReadLocalStore(a,{});(o=util.parseJson(o)||{})[i]={score:t,time:n},util.SaveLocalStore(a,o),setTimeout(function(){u(i,o,a)},1e3)},h=parseInt(t.substring(t.length-2)),m=t.substring(0,h),f=JSON.parse(c.AES.decrypt(t.substring(h,t.length-2),"MVT2017"+m).toString(c.enc.Utf8));if(f){var d=[],b=[],p=[],v=[];util.randomArray(f.content,f.play).forEach(function(t,n){d.push(t[0]),b.push(t[1]),p.push(n),v.push(n)});var y=util.randomListArray(d,p,d.length),w=util.randomListArray(b,v,b.length);if(y&&w){var S={currentScore:0,wrongCount:0,time:f.time,time_left:f.time,play:f.play,score:0,game_id:7,addScore:10,life:3,count_win:10,content:[y.list_1,w.list_1],answereds:[[],[]]},T=y.list_2,_=w.list_2;!function(t,n,e){new(0,IGame.core)({container:t,baseUrl:n+"/game/NCDC/assets/",states:[{name:"Boot",state:TVUB.Boot},{name:"Preload",state:TVUB.Preload},{name:"Home",state:TVUB.Home},{name:"Game",state:TVUB.Game},{name:"End",state:TVUB.End}],message:{rule:"Hãy ghép 2 ô trống chứa nội dung tương đồng hoặc bằng nhau thành cặp đôi. Sai quá 3 lần bài thi kết thúc."},sound:!0,autoLoad:!0,ready:function(t){e(t),t.off("boot")}})}("#tn-game","",function(t){t.setGameData({title:"Em hãy giúp ngựa con nối các từ trong ô trống ở cột bên trái với ô trống ở cột bên phải để được một câu đúng và phù hợp. Nếu sai quá 3 lần bài thi sẽ dừng lại.",deception:"Em hãy giúp ngựa con nối các từ trong ô trống ở cột bên trái với ô trống ở cột bên phải để được một câu đúng và phù hợp. Nếu sai quá 3 lần bài thi sẽ dừng lại."});t.provide("user",{username:"{{user.name}}",uid:"{{user._id}}",avatar:"/game/NCDC/assets/images/avatar.png"});var n=function(n,e){for(var i=n.content,a=0;a<i.length;a++)for(var o=0;o<i[a].length;o++)"latex"==i[a][o].type&&(i[a][o].type="image",i[a][o].content="/latex/"+encodeURI(i[a][o].content));t.setGameData(n),e&&"function"==typeof e&&e()};t.on("click.startGame",function(){n(S,function(){l=new Date,t.goState("Game")})}),t.provide("submitAnswer",function(t,n){"function"==typeof t&&t(T[n.idxLeft]===_[n.idxRight])}),t.on("state",function(t){"End"===t.state&&(t.button.hide=!1,t.button.type="dong_y",t.button.callback=function(t){i<3&&(window.location.href="bai-"+(util.parseInt(i)+1)+".html")})}),t.provide("onOverGame",function(t,n,e){"function"==typeof t&&t(n,e),g(n,f.time-e)}),t.on("click.endGame",function(){i<3&&(window.location.href="bai-"+(util.parseInt(i)+1)+".html")})})}else Alert("Xin lỗi <br/> đề lỗi hãy báo lại với ban quản trị"),callback(!0,data)}else Alert("không có bài thi cho vòng này")}("{{{exam}}}",0,"{{{round_id}}}","{{{test_id}}}",0,0,0,crt)});